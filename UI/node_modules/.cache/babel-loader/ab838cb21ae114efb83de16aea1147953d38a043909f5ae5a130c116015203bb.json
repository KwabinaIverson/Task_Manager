{"ast":null,"code":"import { ref } from 'vue';\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      email: '',\n      password: '',\n      emailError: '',\n      users: []\n    };\n  },\n  setup() {\n    const btnHover = ref(false);\n    return {\n      btnHover\n    };\n  },\n  methods: {\n    validateEmail() {\n      // email regex\n      const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n\n      // check if email is valid\n      if (!emailRegex.test(this.email)) {\n        this.emailError = 'Please enter a valid email';\n        this.email = '';\n        this.password = '';\n      } else {\n        this.emailError = '';\n        return true;\n      }\n    },\n    async fetchUsers() {\n      // Fetch users from the API\n      const res = await fetch(\"api/users\");\n      const data = await res.json();\n      return data;\n    },\n    onSubmit(e) {\n      e.preventDefault();\n      if (!this.email || !this.password) {\n        alert('Please fill in every field');\n        return;\n      }\n\n      // Validate email\n      if (!this.validateEmail()) {\n        return;\n      }\n\n      // Validate email in the backend\n      // If email is not found, display error message\n      // If email is found, check if the password matches\n      // If password matches, log in the user\n      // If password does not match, display error message\n      for (let i = 0; i < this.users.length; i++) {\n        if (this.users[i].email === this.email) {\n          if (this.users[i].password !== this.password) {\n            alert('Password is incorrect');\n            return;\n          }\n          break;\n        }\n        if (i === this.users.length - 1) {\n          alert('Email not found');\n          return;\n        }\n      }\n      alert('Log In Successful!');\n      this.email = '';\n      this.password = '';\n    },\n    async created() {\n      this.users = await this.fetchUsers();\n      alert(`this.users`);\n    }\n  }\n};","map":{"version":3,"names":["ref","name","data","email","password","emailError","users","setup","btnHover","methods","validateEmail","emailRegex","test","fetchUsers","res","fetch","json","onSubmit","e","preventDefault","alert","i","length","created"],"sources":["/Users/wolf/Hub4Codes/task_management_app/task_management_ui/src/components/Login.vue"],"sourcesContent":["<template>\n    <div class=\"login\">\n      <div class=\"flex-box-container\">\n        <h1 class=\"app-name\">AgileFlow</h1>\n        <h1>Log-In Page</h1>\n        <div class=\"flexbox-item\"></div>\n      </div>\n      <form @submit=\"onSubmit\">\n        <div class=\"form-group\">\n          <label for=\"email\">Email </label>\n          <input type=\"email\" id=\"email\" v-model=\"email\" required placeholder=\"johndoe@gmail.com\">\n          <p v-if=\"emailError\" class=\"error-msg\">{{ emailError }}</p>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"password\">Password </label>\n          <input type=\"password\" id=\"password\" v-model=\"password\" required placeholder=\"babayega\">\n        </div>\n        <button\n          @click=\"onSubmit\"\n          @mouseover=\"btnHover = true\"\n          @mouseleave=\"btnHover = false\"\n          :class=\"{ 'is-hovering': btnHover}\"\n        >\n          Log In\n        </button>\n      </form>\n      <img class=\"zen\" alt=\"Zenitsu\" src=\"../assets/zen.png\">\n    </div>\n  </template>\n  \n  <script>\n  import { ref } from 'vue'\n  \n  export default {\n    name: 'Login',\n    data() {\n      return {\n          email: '',\n          password: '',\n          emailError: '',\n          users: []\n      }\n    },\n    setup() {\n      const btnHover = ref(false)\n  \n      return {\n        btnHover\n      };\n    },\n    methods: {\n      validateEmail() {\n        // email regex\n        const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n\n        // check if email is valid\n        if (!emailRegex.test(this.email)) {\n          this.emailError = 'Please enter a valid email';\n          this.email = ''\n          this.password = ''\n        } else {\n          this.emailError = '';\n          return true;\n        }\n      },\n      async fetchUsers() {\n        // Fetch users from the API\n        const res = await fetch(\"api/users\")\n\n        const data = await res.json()\n        return data\n      },\n      onSubmit(e) {\n        e.preventDefault()\n  \n        if(!this.email || !this.password) {\n          alert('Please fill in every field')\n          return\n        }\n\n        // Validate email\n        if (!this.validateEmail()) {\n          return;\n        }\n\n        // Validate email in the backend\n        // If email is not found, display error message\n        // If email is found, check if the password matches\n        // If password matches, log in the user\n        // If password does not match, display error message\n        for (let i=0; i < this.users.length; i++) {\n          if (this.users[i].email === this.email) {\n            if (this.users[i].password !== this.password) {\n              alert('Password is incorrect');\n              return;\n            }\n            break;\n          }\n          if (i === this.users.length - 1) {\n            alert('Email not found');\n            return;\n          }\n        }\n\n        alert('Log In Successful!');\n  \n        this.email = ''\n        this.password = ''\n      },\n      async created() {\n        this.users = await this.fetchUsers();\n        alert(`this.users`);\n      }\n    }\n  }\n  </script>\n  \n  <style scoped>\n   h1 {\n      font-family: fantasy;\n      margin: 20px 0;\n    }\n  \n    .flex-box-container {\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n    }\n  \n    .page-name {\n      align-self: center;\n      flex-grow: 2;\n    }\n  \n    .app-name {\n      flex-grow: 1;\n      font-size: 40px;\n      width: 130px;\n      margin-left: 5px;\n      text-align: left;\n      padding-left: 10px;\n    }\n  \n    .flexbox-item {\n      border: 2px solid black;\n      width: 100px;\n      min-height: 50px;\n      flex-grow: 1;\n      margin: 10px 10px;\n    }\n    .login {\n      background: black;\n      width: 100%;\n      height: 760px;\n    }\n  \n    /*.zen {\n      height: 40%;\n      position: relative;\n      top: 80px;\n    }*/\n  \n    input {\n      margin: 8px 0;\n    }\n  \n    #email{\n      margin-left: 27px;        \n    }\n  \n    button {\n      text-align: center;\n      position: relative;\n      margin: 40px 10px;\n    }\n  \n    .form-group {\n      text-align: center;\n    }\n\n    .error-msg {\n    color: red;\n    margin-top: 5px;\n  }\n  </style>"],"mappings":"AA+BE,SAASA,GAAE,QAAS,KAAI;AAExB,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACHC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,EAAE;MACdC,KAAK,EAAE;IACX;EACF,CAAC;EACDC,KAAKA,CAAA,EAAG;IACN,MAAMC,QAAO,GAAIR,GAAG,CAAC,KAAK;IAE1B,OAAO;MACLQ;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,aAAaA,CAAA,EAAG;MACd;MACA,MAAMC,UAAS,GAAI,iDAAiD;;MAEpE;MACA,IAAI,CAACA,UAAU,CAACC,IAAI,CAAC,IAAI,CAACT,KAAK,CAAC,EAAE;QAChC,IAAI,CAACE,UAAS,GAAI,4BAA4B;QAC9C,IAAI,CAACF,KAAI,GAAI,EAAC;QACd,IAAI,CAACC,QAAO,GAAI,EAAC;MACnB,OAAO;QACL,IAAI,CAACC,UAAS,GAAI,EAAE;QACpB,OAAO,IAAI;MACb;IACF,CAAC;IACD,MAAMQ,UAAUA,CAAA,EAAG;MACjB;MACA,MAAMC,GAAE,GAAI,MAAMC,KAAK,CAAC,WAAW;MAEnC,MAAMb,IAAG,GAAI,MAAMY,GAAG,CAACE,IAAI,CAAC;MAC5B,OAAOd,IAAG;IACZ,CAAC;IACDe,QAAQA,CAACC,CAAC,EAAE;MACVA,CAAC,CAACC,cAAc,CAAC;MAEjB,IAAG,CAAC,IAAI,CAAChB,KAAI,IAAK,CAAC,IAAI,CAACC,QAAQ,EAAE;QAChCgB,KAAK,CAAC,4BAA4B;QAClC;MACF;;MAEA;MACA,IAAI,CAAC,IAAI,CAACV,aAAa,CAAC,CAAC,EAAE;QACzB;MACF;;MAEA;MACA;MACA;MACA;MACA;MACA,KAAK,IAAIW,CAAC,GAAC,CAAC,EAAEA,CAAA,GAAI,IAAI,CAACf,KAAK,CAACgB,MAAM,EAAED,CAAC,EAAE,EAAE;QACxC,IAAI,IAAI,CAACf,KAAK,CAACe,CAAC,CAAC,CAAClB,KAAI,KAAM,IAAI,CAACA,KAAK,EAAE;UACtC,IAAI,IAAI,CAACG,KAAK,CAACe,CAAC,CAAC,CAACjB,QAAO,KAAM,IAAI,CAACA,QAAQ,EAAE;YAC5CgB,KAAK,CAAC,uBAAuB,CAAC;YAC9B;UACF;UACA;QACF;QACA,IAAIC,CAAA,KAAM,IAAI,CAACf,KAAK,CAACgB,MAAK,GAAI,CAAC,EAAE;UAC/BF,KAAK,CAAC,iBAAiB,CAAC;UACxB;QACF;MACF;MAEAA,KAAK,CAAC,oBAAoB,CAAC;MAE3B,IAAI,CAACjB,KAAI,GAAI,EAAC;MACd,IAAI,CAACC,QAAO,GAAI,EAAC;IACnB,CAAC;IACD,MAAMmB,OAAOA,CAAA,EAAG;MACd,IAAI,CAACjB,KAAI,GAAI,MAAM,IAAI,CAACO,UAAU,CAAC,CAAC;MACpCO,KAAK,CAAE,YAAW,CAAC;IACrB;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}